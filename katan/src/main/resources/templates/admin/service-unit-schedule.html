<div th:fragment="content">

    <h4 th:text="'Ωράρια ραντεβού: ' + ${serviceUnit.name}"></h4>
    <input type="hidden" id="serviceUnitId" th:value="${serviceUnit.id}">

    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
    <div th:if="${success}" class="alert alert-success" th:text="${success}"></div>

    <form th:action="@{/admin/service-units/{id}/schedules(id=${serviceUnit.id})}"
          method="post"
          class="row g-2"
          onsubmit="event.preventDefault(); submitScheduleAction(this);">
        <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />


        <div class="col-md-3">
            <label class="form-label">Ημέρα</label>
            <select class="form-select" name="dayOfWeek" required>
                <option th:each="d : ${days}" th:value="${d}" th:text="${d}"></option>
            </select>
        </div>

        <div class="col-md-2">
            <label class="form-label">Έναρξη</label>
            <input type="time" class="form-control" name="startTime" required>
        </div>

        <div class="col-md-2">
            <label class="form-label">Λήξη</label>
            <input type="time" class="form-control" name="endTime" required>
        </div>

        <div class="col-md-2">
            <label class="form-label">Slot (min)</label>
            <input type="number" class="form-control" name="slotMinutes" min="5" max="180" value="15" required>
        </div>

        <div class="col-md-3 d-flex align-items-end">
            <button class="btn btn-primary w-100" type="submit">Προσθήκη</button>
        </div>
    </form>

    <hr/>

    <table class="table table-sm">
        <thead>
        <tr>
            <th>Ημέρα</th><th>Από</th><th>Έως</th><th>Slot</th><th>Active</th><th></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="s : ${schedules}">
            <td th:text="${s.dayOfWeek}"></td>
            <td th:text="${s.startTime}"></td>
            <td th:text="${s.endTime}"></td>
            <td th:text="${s.slotMinutes}"></td>
            <td>
                <span th:if="${s.active}" class="badge bg-success">Ενεργό</span>
                <span th:unless="${s.active}" class="badge bg-secondary">Ανενεργό</span>
            </td>
            <td class="text-end">
                <form th:action="@{/admin/service-units/{sid}/schedules/{schId}/toggle(sid=${serviceUnit.id},schId=${s.id})}"
                      method="post"
                      style="display:inline"
                      onsubmit="event.preventDefault(); submitScheduleAction(this);">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button class="btn btn-outline-secondary btn-sm" type="submit">Toggle</button>
                </form>

                <form th:action="@{/admin/service-units/{sid}/schedules/{schId}/delete(sid=${serviceUnit.id},schId=${s.id})}"
                      method="post"
                      style="display:inline"
                      onsubmit="event.preventDefault(); submitScheduleAction(this);">
                    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
                    <button class="btn btn-outline-danger btn-sm" type="submit">Delete</button>
                </form>

            </td>
        </tr>
        </tbody>
    </table>

    <button class="btn btn-secondary mt-3"
            type="button"
            onclick="loadContent('/admin/service-units','adminTab')">
        Πίσω στις Υπηρεσίες
    </button>
</div>
